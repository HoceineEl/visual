import{o as K,c as Oe,a as Be,j as Le,L as Me,a_ as Ke,a0 as je,h as Ve,av as $e,a$ as _e,H as We,m as P,aM as qe,d as oe,_ as Ue,M as be,f as H,N as X,O as pe,P as he,Q as j,R as me,az as Ge,aA as He,i as Xe,t as Ye,e as ze,b as Ze,aB as Qe,b0 as Je}from"./index-T6PvvqwX.js";function jt(a,e){return K(),Oe("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[Be("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}const et=Le("field").parts("root","errorText","helperText","input","label","select","textarea"),I=et.build(),[tt,xe]=Me("FieldContext"),rt=a=>{const{required:e,disabled:t,invalid:r,readOnly:i,ids:u}=a,n=Ke({hasErrorText:!1,hasHelperText:!1}),c=a.id??`field-${Math.random().toString(36).substr(2,9)}`,f=je(null),h=(u==null?void 0:u.control)??`field::${c}`,g=(u==null?void 0:u.errorText)??`field::${c}::error-text`,d=(u==null?void 0:u.helperText)??`field::${c}::helper-text`,v=(u==null?void 0:u.label)??`field::${c}::label`;Ve(()=>{const O=f.value;if(!O)return;const V=$e(O),$=V.document,Q=()=>{n.hasErrorText=!!$.getElementById(g),n.hasHelperText=!!$.getElementById(d)};Q();const B=new V.MutationObserver(Q);B.observe(O,{childList:!0,subtree:!0}),_e(()=>{B.disconnect()})});const N=()=>({...I.root.attrs,id:h,role:"group","data-disabled":P(t),"data-invalid":P(r),"data-readonly":P(i)}),w=()=>({...I.label.attrs,id:v,"data-disabled":P(t),"data-invalid":P(r),"data-readonly":P(i),htmlFor:c}),S=[];n.hasErrorText&&r&&S.push(g),n.hasHelperText&&S.push(d);const k=()=>({"aria-describedby":S.join(" ")||void 0,"aria-invalid":qe(r),"data-invalid":P(r),"data-required":P(e),"data-readonly":P(i),id:c,required:e,disabled:t,readOnly:i}),x=()=>({...k(),...I.input.attrs}),Y=()=>({...k(),...I.textarea.attrs}),se=()=>({...k(),...I.select.attrs}),z=()=>({id:d,...I.helperText.attrs}),Z=()=>({id:g,...I.errorText.attrs,"aria-live":"polite"});return We(()=>({ariaDescribedby:S.join(" "),ids:{control:c,label:v,errorText:g,helperText:d},refs:{rootRef:f},disabled:t,invalid:r,readOnly:i,required:e,getLabelProps:w,getRootProps:N,getInputProps:x,getTextareaProps:Y,getSelectProps:se,getHelperTextProps:z,getErrorTextProps:Z}))},at=oe({__name:"field-root",props:Ue({disabled:{type:Boolean},id:{},ids:{},invalid:{type:Boolean},readOnly:{type:Boolean},required:{type:Boolean},asChild:{type:Boolean}},{disabled:void 0,invalid:void 0,readOnly:void 0,required:void 0}),setup(a){const t=rt(a);return tt(t),be(),(r,i)=>(K(),H(j(me).div,he(j(t).getRootProps(),{"as-child":r.asChild}),{default:X(()=>[pe(r.$slots,"default")]),_:3},16,["as-child"]))}}),nt=oe({__name:"field-label",props:{asChild:{type:Boolean}},setup(a){const e=xe();return be(),(t,r)=>(K(),H(j(me).label,he(j(e).getLabelProps(),{"as-child":t.asChild}),{default:X(()=>[pe(t.$slots,"default")]),_:3},16,["as-child"]))}}),it=oe({__name:"field-input",props:{modelValue:{},asChild:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:e}){const t=xe(),r=e;return be(),(i,u)=>(K(),H(j(me).input,he(j(t).getInputProps(),{"as-child":i.asChild,value:i.modelValue,onInput:u[0]||(u[0]=n=>r("update:modelValue",n.target.value))}),{default:X(()=>[pe(i.$slots,"default")]),_:3},16,["as-child","value"]))}}),Vt=oe({__name:"TextInput",props:Ge({label:null},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const e=He(a,"modelValue"),t=a;return(r,i)=>{const u=nt,n=it,c=at;return K(),H(c,{class:"flex flex-col gap-1.5"},{default:X(()=>[a.label?(K(),H(u,{key:0,class:"text-sm font-medium"},{default:X(()=>[Xe(Ye(t.label),1)]),_:1})):ze("",!0),Ze(n,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=f=>e.value=f),class:Qe(["px-3 h-10 text-surface-500 ","rounded border border-gray-300","focus:outline-none focus:ring focus:ring-gray-700"])},null,8,["modelValue"])]),_:1})}}});var ot=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},L=new WeakMap,J=new WeakMap,ee={},ce=0,ke=function(a){return a&&(a.host||ke(a.parentNode))},st=function(a,e){return e.map(function(t){if(a.contains(t))return t;var r=ke(t);return r&&a.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",a,". Doing nothing"),null)}).filter(function(t){return!!t})},ut=function(a,e,t,r){var i=st(e,Array.isArray(a)?a:[a]);ee[t]||(ee[t]=new WeakMap);var u=ee[t],n=[],c=new Set,f=new Set(i),h=function(d){!d||c.has(d)||(c.add(d),h(d.parentNode))};i.forEach(h);var g=function(d){!d||f.has(d)||Array.prototype.forEach.call(d.children,function(v){if(c.has(v))g(v);else try{var N=v.getAttribute(r),w=N!==null&&N!=="false",S=(L.get(v)||0)+1,k=(u.get(v)||0)+1;L.set(v,S),u.set(v,k),n.push(v),S===1&&w&&J.set(v,!0),k===1&&v.setAttribute(t,"true"),w||v.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",v,x)}})};return g(e),c.clear(),ce++,function(){n.forEach(function(d){var v=L.get(d)-1,N=u.get(d)-1;L.set(d,v),u.set(d,N),v||(J.has(d)||d.removeAttribute(r),J.delete(d)),N||d.removeAttribute(t)}),ce--,ce||(L=new WeakMap,L=new WeakMap,J=new WeakMap,ee={})}},lt=function(a,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(a)?a:[a]),i=ot(a);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),ut(r,i,t,"aria-hidden")):function(){return null}},ct=a=>{const e=requestAnimationFrame(()=>a());return()=>cancelAnimationFrame(e)};function $t(a,e={}){const{defer:t=!0}=e,r=t?ct:u=>u(),i=[];return i.push(r(()=>{const n=(typeof a=="function"?a():a).filter(Boolean);i.push(lt(n))})),()=>{i.forEach(u=>u==null?void 0:u())}}var de="data-scroll-lock";function ge(a,e){if(!a)return;const t=a.style.cssText;return Object.assign(a.style,e),()=>{a.style.cssText=t}}function dt(a,e,t){if(!a)return;const r=a.style.getPropertyValue(e);return a.style.setProperty(e,t),()=>{r?a.style.setProperty(e,r):a.style.removeProperty(e)}}function ft(a){const e=a.getBoundingClientRect().left;return Math.round(e)+a.scrollLeft?"paddingLeft":"paddingRight"}function _t(a){const e=a??document,t=e.defaultView??window,{documentElement:r,body:i}=e;if(i.hasAttribute(de))return;i.setAttribute(de,"");const n=t.innerWidth-r.clientWidth,c=()=>dt(r,"--scrollbar-width",`${n}px`),f=ft(r),h=()=>ge(i,{overflow:"hidden",[f]:`${n}px`}),g=()=>{const{scrollX:v,scrollY:N,visualViewport:w}=t,S=(w==null?void 0:w.offsetLeft)??0,k=(w==null?void 0:w.offsetTop)??0,x=ge(i,{position:"fixed",overflow:"hidden",top:`${-(N-Math.floor(k))}px`,left:`${-(v-Math.floor(S))}px`,right:"0",[f]:`${n}px`});return()=>{x==null||x(),t.scrollTo({left:v,top:N,behavior:"instant"})}},d=[c(),Je()?g():h()];return()=>{d.forEach(v=>v==null?void 0:v()),i.removeAttribute(de)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Pe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],re=Pe.join(","),Ae=typeof Element>"u",D=Ae?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ae=!Ae&&Element.prototype.getRootNode?function(a){var e;return a==null||(e=a.getRootNode)===null||e===void 0?void 0:e.call(a)}:function(a){return a==null?void 0:a.ownerDocument},ne=function a(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),u=i===""||i==="true",n=u||t&&e&&a(e.parentNode);return n},vt=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},Ce=function(e,t,r){if(ne(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(re));return t&&D.call(e,re)&&i.unshift(e),i=i.filter(r),i},Ie=function a(e,t,r){for(var i=[],u=Array.from(e);u.length;){var n=u.shift();if(!ne(n,!1))if(n.tagName==="SLOT"){var c=n.assignedElements(),f=c.length?c:n.children,h=a(f,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:n,candidates:h})}else{var g=D.call(n,re);g&&r.filter(n)&&(t||!e.includes(n))&&i.push(n);var d=n.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(n),v=!ne(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(n));if(d&&v){var N=a(d===!0?n.children:d.children,!0,r);r.flatten?i.push.apply(i,N):i.push({scopeParent:n,candidates:N})}else u.unshift.apply(u,n.children)}}return i},Re=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},R=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||vt(e))&&!Re(e)?0:e.tabIndex},bt=function(e,t){var r=R(e);return r<0&&t&&!Re(e)?0:r},pt=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},De=function(e){return e.tagName==="INPUT"},ht=function(e){return De(e)&&e.type==="hidden"},mt=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},yt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},gt=function(e){if(!e.name)return!0;var t=e.form||ae(e),r=function(c){return t.querySelectorAll('input[type="radio"][name="'+c+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(n){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",n.message),!1}var u=yt(i,e.form);return!u||u===e},wt=function(e){return De(e)&&e.type==="radio"},Tt=function(e){return wt(e)&&!gt(e)},Nt=function(e){var t,r=e&&ae(e),i=(t=r)===null||t===void 0?void 0:t.host,u=!1;if(r&&r!==e){var n,c,f;for(u=!!((n=i)!==null&&n!==void 0&&(c=n.ownerDocument)!==null&&c!==void 0&&c.contains(i)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!u&&i;){var h,g,d;r=ae(i),i=(h=r)===null||h===void 0?void 0:h.host,u=!!((g=i)!==null&&g!==void 0&&(d=g.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return u},we=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Et=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=D.call(e,"details>summary:first-of-type"),n=u?e.parentElement:e;if(D.call(n,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var c=e;e;){var f=e.parentElement,h=ae(e);if(f&&!f.shadowRoot&&i(f)===!0)return we(e);e.assignedSlot?e=e.assignedSlot:!f&&h!==e.ownerDocument?e=h.host:e=f}e=c}if(Nt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return we(e);return!1},Ft=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return D.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},ie=function(e,t){return!(t.disabled||ne(t)||ht(t)||Et(t,e)||mt(t)||Ft(t))},ve=function(e,t){return!(Tt(t)||R(t)<0||!ie(e,t))},St=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},xt=function a(e){var t=[],r=[];return e.forEach(function(i,u){var n=!!i.scopeParent,c=n?i.scopeParent:i,f=bt(c,n),h=n?a(i.candidates):c;f===0?n?t.push.apply(t,h):t.push(c):r.push({documentOrder:u,tabIndex:f,item:i,isScope:n,content:h})}),r.sort(pt).reduce(function(i,u){return u.isScope?i.push.apply(i,u.content):i.push(u.content),i},[]).concat(t)},kt=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Ie([e],t.includeContainer,{filter:ve.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:St}):r=Ce(e,t.includeContainer,ve.bind(null,t)),xt(r)},Pt=function(e,t){t=t||{};var r;return t.getShadowRoot?r=Ie([e],t.includeContainer,{filter:ie.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=Ce(e,t.includeContainer,ie.bind(null,t)),r},M=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return D.call(e,re)===!1?!1:ve(t,e)},At=Pe.concat("iframe").join(","),fe=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return D.call(e,At)===!1?!1:ie(t,e)};/*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Ct(a,e,t){return(e=Rt(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Te(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),t.push.apply(t,r)}return t}function Ne(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Te(Object(t),!0).forEach(function(r){Ct(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Te(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function It(a,e){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var r=t.call(a,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Rt(a){var e=It(a,"string");return typeof e=="symbol"?e:e+""}var Ee={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},Dt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Ot=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},G=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Bt=function(e){return G(e)&&!e.shiftKey},Lt=function(e){return G(e)&&e.shiftKey},Fe=function(e){return setTimeout(e,0)},Se=function(e,t){var r=-1;return e.every(function(i,u){return t(i)?(r=u,!1):!0}),r},U=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},te=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Mt=[],Wt=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||Mt,u=Ne({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Bt,isKeyBackward:Lt},t),n={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},c,f=function(o,s,l){return o&&o[s]!==void 0?o[s]:u[l||s]},h=function(o,s){var l=typeof(s==null?void 0:s.composedPath)=="function"?s.composedPath():void 0;return n.containerGroups.findIndex(function(b){var p=b.container,y=b.tabbableNodes;return p.contains(o)||(l==null?void 0:l.includes(p))||y.find(function(T){return T===o})})},g=function(o){var s=u[o];if(typeof s=="function"){for(var l=arguments.length,b=new Array(l>1?l-1:0),p=1;p<l;p++)b[p-1]=arguments[p];s=s.apply(void 0,b)}if(s===!0&&(s=void 0),!s){if(s===void 0||s===!1)return s;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var y=s;if(typeof s=="string"&&(y=r.querySelector(s),!y))throw new Error("`".concat(o,"` as selector refers to no known node"));return y},d=function(){var o=g("initialFocus");if(o===!1)return!1;if(o===void 0||!fe(o,u.tabbableOptions))if(h(r.activeElement)>=0)o=r.activeElement;else{var s=n.tabbableGroups[0],l=s&&s.firstTabbableNode;o=l||g("fallbackFocus")}if(!o)throw new Error("Your focus-trap needs to have at least one focusable element");return o},v=function(){if(n.containerGroups=n.containers.map(function(o){var s=kt(o,u.tabbableOptions),l=Pt(o,u.tabbableOptions),b=s.length>0?s[0]:void 0,p=s.length>0?s[s.length-1]:void 0,y=l.find(function(E){return M(E)}),T=l.slice().reverse().find(function(E){return M(E)}),F=!!s.find(function(E){return R(E)>0});return{container:o,tabbableNodes:s,focusableNodes:l,posTabIndexesFound:F,firstTabbableNode:b,lastTabbableNode:p,firstDomTabbableNode:y,lastDomTabbableNode:T,nextTabbableNode:function(C){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,A=s.indexOf(C);return A<0?W?l.slice(l.indexOf(C)+1).find(function(q){return M(q)}):l.slice(0,l.indexOf(C)).reverse().find(function(q){return M(q)}):s[A+(W?1:-1)]}}}),n.tabbableGroups=n.containerGroups.filter(function(o){return o.tabbableNodes.length>0}),n.tabbableGroups.length<=0&&!g("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(n.containerGroups.find(function(o){return o.posTabIndexesFound})&&n.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},N=function(o){var s=o.activeElement;if(s)return s.shadowRoot&&s.shadowRoot.activeElement!==null?N(s.shadowRoot):s},w=function(o){if(o!==!1&&o!==N(document)){if(!o||!o.focus){w(d());return}o.focus({preventScroll:!!u.preventScroll}),n.mostRecentlyFocusedNode=o,Dt(o)&&o.select()}},S=function(o){var s=g("setReturnFocus",o);return s||(s===!1?!1:o)},k=function(o){var s=o.target,l=o.event,b=o.isBackward,p=b===void 0?!1:b;s=s||te(l),v();var y=null;if(n.tabbableGroups.length>0){var T=h(s,l),F=T>=0?n.containerGroups[T]:void 0;if(T<0)p?y=n.tabbableGroups[n.tabbableGroups.length-1].lastTabbableNode:y=n.tabbableGroups[0].firstTabbableNode;else if(p){var E=Se(n.tabbableGroups,function(ue){var le=ue.firstTabbableNode;return s===le});if(E<0&&(F.container===s||fe(s,u.tabbableOptions)&&!M(s,u.tabbableOptions)&&!F.nextTabbableNode(s,!1))&&(E=T),E>=0){var C=E===0?n.tabbableGroups.length-1:E-1,W=n.tabbableGroups[C];y=R(s)>=0?W.lastTabbableNode:W.lastDomTabbableNode}else G(l)||(y=F.nextTabbableNode(s,!1))}else{var A=Se(n.tabbableGroups,function(ue){var le=ue.lastTabbableNode;return s===le});if(A<0&&(F.container===s||fe(s,u.tabbableOptions)&&!M(s,u.tabbableOptions)&&!F.nextTabbableNode(s))&&(A=T),A>=0){var q=A===n.tabbableGroups.length-1?0:A+1,ye=n.tabbableGroups[q];y=R(s)>=0?ye.firstTabbableNode:ye.firstDomTabbableNode}else G(l)||(y=F.nextTabbableNode(s))}}else y=g("fallbackFocus");return y},x=function(o){var s=te(o);if(!(h(s,o)>=0)){if(U(u.clickOutsideDeactivates,o)){c.deactivate({returnFocus:u.returnFocusOnDeactivate});return}U(u.allowOutsideClick,o)||o.preventDefault()}},Y=function(o){var s=te(o),l=h(s,o)>=0;if(l||s instanceof Document)l&&(n.mostRecentlyFocusedNode=s);else{o.stopImmediatePropagation();var b,p=!0;if(n.mostRecentlyFocusedNode)if(R(n.mostRecentlyFocusedNode)>0){var y=h(n.mostRecentlyFocusedNode),T=n.containerGroups[y].tabbableNodes;if(T.length>0){var F=T.findIndex(function(E){return E===n.mostRecentlyFocusedNode});F>=0&&(u.isKeyForward(n.recentNavEvent)?F+1<T.length&&(b=T[F+1],p=!1):F-1>=0&&(b=T[F-1],p=!1))}}else n.containerGroups.some(function(E){return E.tabbableNodes.some(function(C){return R(C)>0})})||(p=!1);else p=!1;p&&(b=k({target:n.mostRecentlyFocusedNode,isBackward:u.isKeyBackward(n.recentNavEvent)})),w(b||n.mostRecentlyFocusedNode||d())}n.recentNavEvent=void 0},se=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n.recentNavEvent=o;var l=k({event:o,isBackward:s});l&&(G(o)&&o.preventDefault(),w(l))},z=function(o){(u.isKeyForward(o)||u.isKeyBackward(o))&&se(o,u.isKeyBackward(o))},Z=function(o){Ot(o)&&U(u.escapeDeactivates,o)!==!1&&(o.preventDefault(),c.deactivate())},O=function(o){var s=te(o);h(s,o)>=0||U(u.clickOutsideDeactivates,o)||U(u.allowOutsideClick,o)||(o.preventDefault(),o.stopImmediatePropagation())},V=function(){if(n.active)return Ee.activateTrap(i,c),n.delayInitialFocusTimer=u.delayInitialFocus?Fe(function(){w(d())}):w(d()),r.addEventListener("focusin",Y,!0),r.addEventListener("mousedown",x,{capture:!0,passive:!1}),r.addEventListener("touchstart",x,{capture:!0,passive:!1}),r.addEventListener("click",O,{capture:!0,passive:!1}),r.addEventListener("keydown",z,{capture:!0,passive:!1}),r.addEventListener("keydown",Z),c},$=function(){if(n.active)return r.removeEventListener("focusin",Y,!0),r.removeEventListener("mousedown",x,!0),r.removeEventListener("touchstart",x,!0),r.removeEventListener("click",O,!0),r.removeEventListener("keydown",z,!0),r.removeEventListener("keydown",Z),c},Q=function(o){var s=o.some(function(l){var b=Array.from(l.removedNodes);return b.some(function(p){return p===n.mostRecentlyFocusedNode})});s&&w(d())},B=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Q):void 0,_=function(){B&&(B.disconnect(),n.active&&!n.paused&&n.containers.map(function(o){B.observe(o,{subtree:!0,childList:!0})}))};return c={get active(){return n.active},get paused(){return n.paused},activate:function(o){if(n.active)return this;var s=f(o,"onActivate"),l=f(o,"onPostActivate"),b=f(o,"checkCanFocusTrap");b||v(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=r.activeElement,s==null||s();var p=function(){b&&v(),V(),_(),l==null||l()};return b?(b(n.containers.concat()).then(p,p),this):(p(),this)},deactivate:function(o){if(!n.active)return this;var s=Ne({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},o);clearTimeout(n.delayInitialFocusTimer),n.delayInitialFocusTimer=void 0,$(),n.active=!1,n.paused=!1,_(),Ee.deactivateTrap(i,c);var l=f(s,"onDeactivate"),b=f(s,"onPostDeactivate"),p=f(s,"checkCanReturnFocus"),y=f(s,"returnFocus","returnFocusOnDeactivate");l==null||l();var T=function(){Fe(function(){y&&w(S(n.nodeFocusedBeforeActivation)),b==null||b()})};return y&&p?(p(S(n.nodeFocusedBeforeActivation)).then(T,T),this):(T(),this)},pause:function(o){if(n.paused||!n.active)return this;var s=f(o,"onPause"),l=f(o,"onPostPause");return n.paused=!0,s==null||s(),$(),_(),l==null||l(),this},unpause:function(o){if(!n.paused||!n.active)return this;var s=f(o,"onUnpause"),l=f(o,"onPostUnpause");return n.paused=!1,s==null||s(),v(),V(),_(),l==null||l(),this},updateContainerElements:function(o){var s=[].concat(o).filter(Boolean);return n.containers=s.map(function(l){return typeof l=="string"?r.querySelector(l):l}),n.active&&v(),_(),this}},c.updateContainerElements(e),c};export{Vt as _,$t as a,it as b,Wt as c,at as d,nt as e,_t as p,jt as r,xe as u};
