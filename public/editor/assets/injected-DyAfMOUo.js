var re=Object.defineProperty;var se=(t,i,e)=>i in t?re(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var w=(t,i,e)=>se(t,typeof i!="symbol"?i+"":i,e);var $=11;function ce(t,i){var e=i.attributes,n,a,v,d,u;if(!(i.nodeType===$||t.nodeType===$)){for(var A=e.length-1;A>=0;A--)n=e[A],a=n.name,v=n.namespaceURI,d=n.value,v?(a=n.localName||a,u=t.getAttributeNS(v,a),u!==d&&(n.prefix==="xmlns"&&(a=n.name),t.setAttributeNS(v,a,d))):(u=t.getAttribute(a),u!==d&&t.setAttribute(a,d));for(var M=t.attributes,T=M.length-1;T>=0;T--)n=M[T],a=n.name,v=n.namespaceURI,v?(a=n.localName||a,i.hasAttributeNS(v,a)||t.removeAttributeNS(v,a)):i.hasAttribute(a)||t.removeAttribute(a)}}var k,le="http://www.w3.org/1999/xhtml",f=typeof document>"u"?void 0:document,de=!!f&&"content"in f.createElement("template"),ve=!!f&&f.createRange&&"createContextualFragment"in f.createRange();function oe(t){var i=f.createElement("template");return i.innerHTML=t,i.content.childNodes[0]}function he(t){k||(k=f.createRange(),k.selectNode(f.body));var i=k.createContextualFragment(t);return i.childNodes[0]}function fe(t){var i=f.createElement("body");return i.innerHTML=t,i.childNodes[0]}function ue(t){return t=t.trim(),de?oe(t):ve?he(t):fe(t)}function H(t,i){var e=t.nodeName,n=i.nodeName,a,v;return e===n?!0:(a=e.charCodeAt(0),v=n.charCodeAt(0),a<=90&&v>=97?e===n.toUpperCase():v<=90&&a>=97?n===e.toUpperCase():!1)}function Se(t,i){return!i||i===le?f.createElement(t):f.createElementNS(i,t)}function ye(t,i){for(var e=t.firstChild;e;){var n=e.nextSibling;i.appendChild(e),e=n}return i}function G(t,i,e){t[e]!==i[e]&&(t[e]=i[e],t[e]?t.setAttribute(e,""):t.removeAttribute(e))}var j={OPTION:function(t,i){var e=t.parentNode;if(e){var n=e.nodeName.toUpperCase();n==="OPTGROUP"&&(e=e.parentNode,n=e&&e.nodeName.toUpperCase()),n==="SELECT"&&!e.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!i.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),e.selectedIndex=-1)}G(t,i,"selected")},INPUT:function(t,i){G(t,i,"checked"),G(t,i,"disabled"),t.value!==i.value&&(t.value=i.value),i.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,i){var e=i.value;t.value!==e&&(t.value=e);var n=t.firstChild;if(n){var a=n.nodeValue;if(a==e||!e&&a==t.placeholder)return;n.nodeValue=e}},SELECT:function(t,i){if(!i.hasAttribute("multiple")){for(var e=-1,n=0,a=t.firstChild,v,d;a;)if(d=a.nodeName&&a.nodeName.toUpperCase(),d==="OPTGROUP")v=a,a=v.firstChild;else{if(d==="OPTION"){if(a.hasAttribute("selected")){e=n;break}n++}a=a.nextSibling,!a&&v&&(a=v.nextSibling,v=null)}t.selectedIndex=e}}},L=1,Y=11,J=3,Q=8;function g(){}function pe(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function ge(t){return function(e,n,a){if(a||(a={}),typeof n=="string")if(e.nodeName==="#document"||e.nodeName==="HTML"||e.nodeName==="BODY"){var v=n;n=f.createElement("html"),n.innerHTML=v}else n=ue(n);else n.nodeType===Y&&(n=n.firstElementChild);var d=a.getNodeKey||pe,u=a.onBeforeNodeAdded||g,A=a.onNodeAdded||g,M=a.onBeforeElUpdated||g,T=a.onElUpdated||g,Z=a.onBeforeNodeDiscarded||g,N=a.onNodeDiscarded||g,ee=a.onBeforeElChildrenUpdated||g,te=a.skipFromChildren||g,z=a.addChild||function(r,s){return r.appendChild(s)},V=a.childrenOnly===!0,b=Object.create(null),x=[];function D(r){x.push(r)}function K(r,s){if(r.nodeType===L)for(var o=r.firstChild;o;){var c=void 0;s&&(c=d(o))?D(c):(N(o),o.firstChild&&K(o,s)),o=o.nextSibling}}function I(r,s,o){Z(r)!==!1&&(s&&s.removeChild(r),N(r),K(r,o))}function R(r){if(r.nodeType===L||r.nodeType===Y)for(var s=r.firstChild;s;){var o=d(s);o&&(b[o]=s),R(s),s=s.nextSibling}}R(e);function _(r){A(r);for(var s=r.firstChild;s;){var o=s.nextSibling,c=d(s);if(c){var l=b[c];l&&H(s,l)?(s.parentNode.replaceChild(l,s),U(l,s)):_(s)}else _(s);s=o}}function ie(r,s,o){for(;s;){var c=s.nextSibling;(o=d(s))?D(o):I(s,r,!0),s=c}}function U(r,s,o){var c=d(s);if(c&&delete b[c],!o){var l=M(r,s);if(l===!1||(l instanceof HTMLElement&&(r=l,R(r)),t(r,s),T(r),ee(r,s)===!1))return}r.nodeName!=="TEXTAREA"?ne(r,s):j.TEXTAREA(r,s)}function ne(r,s){var o=te(r,s),c=s.firstChild,l=r.firstChild,O,S,m,P,y;e:for(;c;){for(P=c.nextSibling,O=d(c);!o&&l;){if(m=l.nextSibling,c.isSameNode&&c.isSameNode(l)){c=P,l=m;continue e}S=d(l);var q=l.nodeType,p=void 0;if(q===c.nodeType&&(q===L?(O?O!==S&&((y=b[O])?m===y?p=!1:(r.insertBefore(y,l),S?D(S):I(l,r,!0),l=y,S=d(l)):p=!1):S&&(p=!1),p=p!==!1&&H(l,c),p&&U(l,c)):(q===J||q==Q)&&(p=!0,l.nodeValue!==c.nodeValue&&(l.nodeValue=c.nodeValue))),p){c=P,l=m;continue e}S?D(S):I(l,r,!0),l=m}if(O&&(y=b[O])&&H(y,c))o||z(r,y),U(y,c);else{var F=u(c);F!==!1&&(F&&(c=F),c.actualize&&(c=c.actualize(r.ownerDocument||f)),z(r,c),_(c))}c=P,l=m}ie(r,l,S);var W=j[r.nodeName];W&&W(r,s)}var h=e,C=h.nodeType,X=n.nodeType;if(!V){if(C===L)X===L?H(e,n)||(N(e),h=ye(e,Se(n.nodeName,n.namespaceURI))):h=n;else if(C===J||C===Q){if(X===C)return h.nodeValue!==n.nodeValue&&(h.nodeValue=n.nodeValue),h;h=n}}if(h===n)N(e);else{if(n.isSameNode&&n.isSameNode(h))return;if(U(h,n,V),x)for(var B=0,ae=x.length;B<ae;B++){var E=b[x[B]];E&&I(E,E.parentNode,!1)}}return!V&&h!==e&&e.parentNode&&(h.actualize&&(h=h.actualize(e.ownerDocument||f)),e.parentNode.replaceChild(h,e)),h}}var Ae=ge(ce);window.addEventListener("DOMContentLoaded",function(){new be().init()});class be{constructor(){w(this,"sectionOverlay");w(this,"sectionLabel");w(this,"activeSectionId",null);w(this,"sectionsOrder",[])}init(){var i,e,n,a,v;this.sectionOverlay=document.querySelector("#section-overlay"),this.sectionLabel=document.querySelector("#label"),window.addEventListener("message",({data:d})=>{this.handleMessage(d)}),document.querySelectorAll(".visual-section").forEach(d=>{d.addEventListener("mouseover",this.onSectionHover.bind(this,d)),d.addEventListener("mouseleave",u=>{u.toElement&&u.toElement.closest("#section-overlay")||this.onSectionBlur.call(this,d)})}),(i=this.sectionOverlay.querySelector("#move-up"))==null||i.addEventListener("click",this.moveActiveSectionUp.bind(this)),(e=this.sectionOverlay.querySelector("#move-down"))==null||e.addEventListener("click",this.moveActiveSectionDown.bind(this)),(n=this.sectionOverlay.querySelector("#edit"))==null||n.addEventListener("click",this.editActiveSection.bind(this)),(a=this.sectionOverlay.querySelector("#disable"))==null||a.addEventListener("click",this.disableActiveSection.bind(this)),(v=this.sectionOverlay.querySelector("#remove"))==null||v.addEventListener("click",this.removeActiveSection.bind(this)),this.postMessage("initialize",{themeData:window.themeData,availableSections:window.availableSections}),this.sectionsOrder=window.themeData.sectionsOrder}highlightSection(i){this.activeSectionId=i.dataset.sectionId,this.sectionOverlay.style.display="block",this.sectionOverlay.style.width=i.offsetWidth+"px",this.sectionOverlay.style.height=i.offsetHeight+"px",this.sectionOverlay.style.left=i.offsetLeft+"px",this.sectionOverlay.style.top=i.offsetTop+"px";const e=i.dataset.sectionType;this.sectionLabel.textContent=window.availableSections[e].name,this.sectionOverlay.querySelector("#move-up").style.display="none",this.sectionOverlay.querySelector("#move-down").style.display="none";const n=this.sectionsOrder.indexOf(this.activeSectionId);n>0&&(this.sectionOverlay.querySelector("#move-up").style.display="inline"),n<this.sectionsOrder.length-1&&(this.sectionOverlay.querySelector("#move-down").style.display="inline")}clearActiveSection(){this.activeSectionId=null,this.sectionOverlay.style.display="none"}onSectionHover(i){this.activeSectionId!==i.dataset.sectionId&&this.highlightSection(i)}onSectionBlur(i){this.activeSectionId===i.dataset.sectionId&&this.clearActiveSection()}moveActiveSectionUp(){this.postMessage("moveSectionUp",this.activeSectionId)}moveActiveSectionDown(){this.postMessage("moveSectionDown",this.activeSectionId)}editActiveSection(){this.postMessage("editSection",this.activeSectionId)}disableActiveSection(){this.postMessage("toggleSection",this.activeSectionId)}removeActiveSection(){this.postMessage("removeSection",this.activeSectionId)}refreshPreviewer(i){const e=new DOMParser().parseFromString(i,"text/html");Ae(document.querySelector("html"),e.querySelector("html"))}postMessage(i,e){window.parent.postMessage({type:i,data:e},window.origin)}handleMessage({type:i,data:e}){switch(i){case"highlightSection":const n=document.querySelector(`[data-section-id="${e}"]`);n&&(this.highlightSection(n),n.scrollIntoView({behavior:"smooth"}));break;case"clearActiveSection":this.clearActiveSection();break;case"sectionsOrder":this.sectionsOrder=e;break;case"refresh":this.refreshPreviewer(e);break}}}
