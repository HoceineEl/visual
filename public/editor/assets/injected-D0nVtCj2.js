var re=Object.defineProperty;var se=(i,t,e)=>t in i?re(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var C=(i,t,e)=>se(i,typeof t!="symbol"?t+"":t,e);var $=11;function ce(i,t){var e=t.attributes,n,a,o,l,f;if(!(t.nodeType===$||i.nodeType===$)){for(var p=e.length-1;p>=0;p--)n=e[p],a=n.name,o=n.namespaceURI,l=n.value,o?(a=n.localName||a,f=i.getAttributeNS(o,a),f!==l&&(n.prefix==="xmlns"&&(a=n.name),i.setAttributeNS(o,a,l))):(f=i.getAttribute(a),f!==l&&i.setAttribute(a,l));for(var m=i.attributes,S=m.length-1;S>=0;S--)n=m[S],a=n.name,o=n.namespaceURI,o?(a=n.localName||a,t.hasAttributeNS(o,a)||i.removeAttributeNS(o,a)):t.hasAttribute(a)||i.removeAttribute(a)}}var P,le="http://www.w3.org/1999/xhtml",u=typeof document>"u"?void 0:document,oe=!!u&&"content"in u.createElement("template"),de=!!u&&u.createRange&&"createContextualFragment"in u.createRange();function ve(i){var t=u.createElement("template");return t.innerHTML=i,t.content.childNodes[0]}function he(i){P||(P=u.createRange(),P.selectNode(u.body));var t=P.createContextualFragment(i);return t.childNodes[0]}function ue(i){var t=u.createElement("body");return t.innerHTML=i,t.childNodes[0]}function fe(i){return i=i.trim(),oe?ve(i):de?he(i):ue(i)}function H(i,t){var e=i.nodeName,n=t.nodeName,a,o;return e===n?!0:(a=e.charCodeAt(0),o=n.charCodeAt(0),a<=90&&o>=97?e===n.toUpperCase():o<=90&&a>=97?n===e.toUpperCase():!1)}function Se(i,t){return!t||t===le?u.createElement(i):u.createElementNS(t,i)}function ye(i,t){for(var e=i.firstChild;e;){var n=e.nextSibling;t.appendChild(e),e=n}return t}function G(i,t,e){i[e]!==t[e]&&(i[e]=t[e],i[e]?i.setAttribute(e,""):i.removeAttribute(e))}var j={OPTION:function(i,t){var e=i.parentNode;if(e){var n=e.nodeName.toUpperCase();n==="OPTGROUP"&&(e=e.parentNode,n=e&&e.nodeName.toUpperCase()),n==="SELECT"&&!e.hasAttribute("multiple")&&(i.hasAttribute("selected")&&!t.selected&&(i.setAttribute("selected","selected"),i.removeAttribute("selected")),e.selectedIndex=-1)}G(i,t,"selected")},INPUT:function(i,t){G(i,t,"checked"),G(i,t,"disabled"),i.value!==t.value&&(i.value=t.value),t.hasAttribute("value")||i.removeAttribute("value")},TEXTAREA:function(i,t){var e=t.value;i.value!==e&&(i.value=e);var n=i.firstChild;if(n){var a=n.nodeValue;if(a==e||!e&&a==i.placeholder)return;n.nodeValue=e}},SELECT:function(i,t){if(!t.hasAttribute("multiple")){for(var e=-1,n=0,a=i.firstChild,o,l;a;)if(l=a.nodeName&&a.nodeName.toUpperCase(),l==="OPTGROUP")o=a,a=o.firstChild;else{if(l==="OPTION"){if(a.hasAttribute("selected")){e=n;break}n++}a=a.nextSibling,!a&&o&&(a=o.nextSibling,o=null)}i.selectedIndex=e}}},x=1,Y=11,J=3,Q=8;function b(){}function pe(i){if(i)return i.getAttribute&&i.getAttribute("id")||i.id}function ge(i){return function(e,n,a){if(a||(a={}),typeof n=="string")if(e.nodeName==="#document"||e.nodeName==="HTML"||e.nodeName==="BODY"){var o=n;n=u.createElement("html"),n.innerHTML=o}else n=fe(n);else n.nodeType===Y&&(n=n.firstElementChild);var l=a.getNodeKey||pe,f=a.onBeforeNodeAdded||b,p=a.onNodeAdded||b,m=a.onBeforeElUpdated||b,S=a.onElUpdated||b,Z=a.onBeforeNodeDiscarded||b,M=a.onNodeDiscarded||b,ee=a.onBeforeElChildrenUpdated||b,te=a.skipFromChildren||b,z=a.addChild||function(r,s){return r.appendChild(s)},V=a.childrenOnly===!0,O=Object.create(null),L=[];function N(r){L.push(r)}function K(r,s){if(r.nodeType===x)for(var v=r.firstChild;v;){var c=void 0;s&&(c=l(v))?N(c):(M(v),v.firstChild&&K(v,s)),v=v.nextSibling}}function D(r,s,v){Z(r)!==!1&&(s&&s.removeChild(r),M(r),K(r,v))}function E(r){if(r.nodeType===x||r.nodeType===Y)for(var s=r.firstChild;s;){var v=l(s);v&&(O[v]=s),E(s),s=s.nextSibling}}E(e);function R(r){p(r);for(var s=r.firstChild;s;){var v=s.nextSibling,c=l(s);if(c){var d=O[c];d&&H(s,d)?(s.parentNode.replaceChild(d,s),U(d,s)):R(s)}else R(s);s=v}}function ie(r,s,v){for(;s;){var c=s.nextSibling;(v=l(s))?N(v):D(s,r,!0),s=c}}function U(r,s,v){var c=l(s);if(c&&delete O[c],!v){var d=m(r,s);if(d===!1||(d instanceof HTMLElement&&(r=d,E(r)),i(r,s),S(r),ee(r,s)===!1))return}r.nodeName!=="TEXTAREA"?ne(r,s):j.TEXTAREA(r,s)}function ne(r,s){var v=te(r,s),c=s.firstChild,d=r.firstChild,w,y,T,k,g;e:for(;c;){for(k=c.nextSibling,w=l(c);!v&&d;){if(T=d.nextSibling,c.isSameNode&&c.isSameNode(d)){c=k,d=T;continue e}y=l(d);var q=d.nodeType,A=void 0;if(q===c.nodeType&&(q===x?(w?w!==y&&((g=O[w])?T===g?A=!1:(r.insertBefore(g,d),y?N(y):D(d,r,!0),d=g,y=l(d)):A=!1):y&&(A=!1),A=A!==!1&&H(d,c),A&&U(d,c)):(q===J||q==Q)&&(A=!0,d.nodeValue!==c.nodeValue&&(d.nodeValue=c.nodeValue))),A){c=k,d=T;continue e}y?N(y):D(d,r,!0),d=T}if(w&&(g=O[w])&&H(g,c))v||z(r,g),U(g,c);else{var F=f(c);F!==!1&&(F&&(c=F),c.actualize&&(c=c.actualize(r.ownerDocument||u)),z(r,c),R(c))}c=k,d=T}ie(r,d,y);var W=j[r.nodeName];W&&W(r,s)}var h=e,I=h.nodeType,X=n.nodeType;if(!V){if(I===x)X===x?H(e,n)||(M(e),h=ye(e,Se(n.nodeName,n.namespaceURI))):h=n;else if(I===J||I===Q){if(X===I)return h.nodeValue!==n.nodeValue&&(h.nodeValue=n.nodeValue),h;h=n}}if(h===n)M(e);else{if(n.isSameNode&&n.isSameNode(h))return;if(U(h,n,V),L)for(var _=0,ae=L.length;_<ae;_++){var B=O[L[_]];B&&D(B,B.parentNode,!1)}}return!V&&h!==e&&e.parentNode&&(h.actualize&&(h=h.actualize(e.ownerDocument||u)),e.parentNode.replaceChild(h,e)),h}}var Ae=ge(ce);window.addEventListener("DOMContentLoaded",function(){new be().init()});class be{constructor(){C(this,"sectionOverlay");C(this,"sectionLabel");C(this,"activeSectionId",null);C(this,"sectionsOrder",[])}init(){var t,e,n,a,o;this.sectionOverlay=document.querySelector("#section-overlay"),this.sectionLabel=document.querySelector("#label"),window.addEventListener("message",({data:l})=>{this.handleMessage(l)}),document.querySelectorAll(".visual-section").forEach(l=>{l.addEventListener("mouseover",this.onSectionHover.bind(this,l)),l.addEventListener("mouseleave",f=>{f.toElement&&f.toElement.closest("#section-overlay")||this.onSectionBlur.call(this,l)})}),(t=this.sectionOverlay.querySelector("#move-up"))==null||t.addEventListener("click",this.moveActiveSectionUp.bind(this)),(e=this.sectionOverlay.querySelector("#move-down"))==null||e.addEventListener("click",this.moveActiveSectionDown.bind(this)),(n=this.sectionOverlay.querySelector("#edit"))==null||n.addEventListener("click",this.editActiveSection.bind(this)),(a=this.sectionOverlay.querySelector("#disable"))==null||a.addEventListener("click",this.disableActiveSection.bind(this)),(o=this.sectionOverlay.querySelector("#remove"))==null||o.addEventListener("click",this.removeActiveSection.bind(this)),this.postMessage("initialize",{themeData:window.themeData,availableSections:window.availableSections}),this.sectionsOrder=window.themeData.sectionsOrder,this.extractUsedColors()}highlightSection(t){this.activeSectionId=t.dataset.sectionId,this.sectionOverlay.style.display="block",this.sectionOverlay.style.width=t.offsetWidth+"px",this.sectionOverlay.style.height=t.offsetHeight+"px",this.sectionOverlay.style.left=t.offsetLeft+"px",this.sectionOverlay.style.top=t.offsetTop+"px";const e=t.dataset.sectionType;this.sectionLabel.textContent=window.availableSections[e].name,this.sectionOverlay.querySelector("#move-up").style.display="none",this.sectionOverlay.querySelector("#move-down").style.display="none";const n=this.sectionsOrder.indexOf(this.activeSectionId);n>0&&(this.sectionOverlay.querySelector("#move-up").style.display="inline"),n<this.sectionsOrder.length-1&&(this.sectionOverlay.querySelector("#move-down").style.display="inline")}clearActiveSection(){this.activeSectionId=null,this.sectionOverlay.style.display="none"}onSectionHover(t){this.activeSectionId!==t.dataset.sectionId&&this.highlightSection(t)}onSectionBlur(t){this.activeSectionId===t.dataset.sectionId&&this.clearActiveSection()}moveActiveSectionUp(){this.postMessage("moveSectionUp",this.activeSectionId)}moveActiveSectionDown(){this.postMessage("moveSectionDown",this.activeSectionId)}editActiveSection(){this.postMessage("editSection",this.activeSectionId)}disableActiveSection(){this.postMessage("toggleSection",this.activeSectionId)}removeActiveSection(){this.postMessage("removeSection",this.activeSectionId)}refreshPreviewer(t){const e=new DOMParser().parseFromString(t,"text/html");Ae(document.querySelector("html"),e.querySelector("html"))}postMessage(t,e){window.parent.postMessage({type:t,data:e},window.origin)}handleMessage({type:t,data:e}){switch(t){case"highlightSection":const n=document.querySelector(`[data-section-id="${e}"]`);n&&(this.highlightSection(n),n.scrollIntoView({behavior:"smooth"}));break;case"clearActiveSection":this.clearActiveSection();break;case"sectionsOrder":this.sectionsOrder=e;break;case"refresh":this.refreshPreviewer(e);break}}extractUsedColors(t=6){const e=new Map;document.querySelectorAll("*").forEach(o=>{const l=getComputedStyle(o),f=l.backgroundColor,p=l.color,m=S=>{S!=="transparent"&&S!=="rgba(0, 0, 0, 0)"&&S!==""&&e.set(S,(e.get(S)||0)+1)};m(f),m(p)});const a=Array.from(e.entries()).sort((o,l)=>l[1]-o[1]).map(o=>o[0]).slice(0,t);this.postMessage("usedColors",a)}}
