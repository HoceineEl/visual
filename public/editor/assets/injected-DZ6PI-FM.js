var re=Object.defineProperty;var se=(i,t,e)=>t in i?re(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var C=(i,t,e)=>se(i,typeof t!="symbol"?t+"":t,e);var $=11;function ce(i,t){var e=t.attributes,n,a,l,d,f;if(!(t.nodeType===$||i.nodeType===$)){for(var y=e.length-1;y>=0;y--)n=e[y],a=n.name,l=n.namespaceURI,d=n.value,l?(a=n.localName||a,f=i.getAttributeNS(l,a),f!==d&&(n.prefix==="xmlns"&&(a=n.name),i.setAttributeNS(l,a,d))):(f=i.getAttribute(a),f!==d&&i.setAttribute(a,d));for(var b=i.attributes,S=b.length-1;S>=0;S--)n=b[S],a=n.name,l=n.namespaceURI,l?(a=n.localName||a,t.hasAttributeNS(l,a)||i.removeAttributeNS(l,a)):t.hasAttribute(a)||i.removeAttribute(a)}}var P,le="http://www.w3.org/1999/xhtml",u=typeof document>"u"?void 0:document,de=!!u&&"content"in u.createElement("template"),oe=!!u&&u.createRange&&"createContextualFragment"in u.createRange();function ve(i){var t=u.createElement("template");return t.innerHTML=i,t.content.childNodes[0]}function he(i){P||(P=u.createRange(),P.selectNode(u.body));var t=P.createContextualFragment(i);return t.childNodes[0]}function ue(i){var t=u.createElement("body");return t.innerHTML=i,t.childNodes[0]}function fe(i){return i=i.trim(),de?ve(i):oe?he(i):ue(i)}function _(i,t){var e=i.nodeName,n=t.nodeName,a,l;return e===n?!0:(a=e.charCodeAt(0),l=n.charCodeAt(0),a<=90&&l>=97?e===n.toUpperCase():l<=90&&a>=97?n===e.toUpperCase():!1)}function Se(i,t){return!t||t===le?u.createElement(i):u.createElementNS(t,i)}function pe(i,t){for(var e=i.firstChild;e;){var n=e.nextSibling;t.appendChild(e),e=n}return t}function z(i,t,e){i[e]!==t[e]&&(i[e]=t[e],i[e]?i.setAttribute(e,""):i.removeAttribute(e))}var j={OPTION:function(i,t){var e=i.parentNode;if(e){var n=e.nodeName.toUpperCase();n==="OPTGROUP"&&(e=e.parentNode,n=e&&e.nodeName.toUpperCase()),n==="SELECT"&&!e.hasAttribute("multiple")&&(i.hasAttribute("selected")&&!t.selected&&(i.setAttribute("selected","selected"),i.removeAttribute("selected")),e.selectedIndex=-1)}z(i,t,"selected")},INPUT:function(i,t){z(i,t,"checked"),z(i,t,"disabled"),i.value!==t.value&&(i.value=t.value),t.hasAttribute("value")||i.removeAttribute("value")},TEXTAREA:function(i,t){var e=t.value;i.value!==e&&(i.value=e);var n=i.firstChild;if(n){var a=n.nodeValue;if(a==e||!e&&a==i.placeholder)return;n.nodeValue=e}},SELECT:function(i,t){if(!t.hasAttribute("multiple")){for(var e=-1,n=0,a=i.firstChild,l,d;a;)if(d=a.nodeName&&a.nodeName.toUpperCase(),d==="OPTGROUP")l=a,a=l.firstChild;else{if(d==="OPTION"){if(a.hasAttribute("selected")){e=n;break}n++}a=a.nextSibling,!a&&l&&(a=l.nextSibling,l=null)}i.selectedIndex=e}}},x=1,Y=11,J=3,Q=8;function w(){}function ye(i){if(i)return i.getAttribute&&i.getAttribute("id")||i.id}function ge(i){return function(e,n,a){if(a||(a={}),typeof n=="string")if(e.nodeName==="#document"||e.nodeName==="HTML"||e.nodeName==="BODY"){var l=n;n=u.createElement("html"),n.innerHTML=l}else n=fe(n);else n.nodeType===Y&&(n=n.firstElementChild);var d=a.getNodeKey||ye,f=a.onBeforeNodeAdded||w,y=a.onNodeAdded||w,b=a.onBeforeElUpdated||w,S=a.onElUpdated||w,Z=a.onBeforeNodeDiscarded||w,L=a.onNodeDiscarded||w,ee=a.onBeforeElChildrenUpdated||w,te=a.skipFromChildren||w,E=a.addChild||function(r,s){return r.appendChild(s)},H=a.childrenOnly===!0,m=Object.create(null),M=[];function N(r){M.push(r)}function K(r,s){if(r.nodeType===x)for(var v=r.firstChild;v;){var c=void 0;s&&(c=d(v))?N(c):(L(v),v.firstChild&&K(v,s)),v=v.nextSibling}}function U(r,s,v){Z(r)!==!1&&(s&&s.removeChild(r),L(r),K(r,v))}function V(r){if(r.nodeType===x||r.nodeType===Y)for(var s=r.firstChild;s;){var v=d(s);v&&(m[v]=s),V(s),s=s.nextSibling}}V(e);function B(r){y(r);for(var s=r.firstChild;s;){var v=s.nextSibling,c=d(s);if(c){var o=m[c];o&&_(s,o)?(s.parentNode.replaceChild(o,s),D(o,s)):B(s)}else B(s);s=v}}function ie(r,s,v){for(;s;){var c=s.nextSibling;(v=d(s))?N(v):U(s,r,!0),s=c}}function D(r,s,v){var c=d(s);if(c&&delete m[c],!v){var o=b(r,s);if(o===!1||(o instanceof HTMLElement&&(r=o,V(r)),i(r,s),S(r),ee(r,s)===!1))return}r.nodeName!=="TEXTAREA"?ne(r,s):j.TEXTAREA(r,s)}function ne(r,s){var v=te(r,s),c=s.firstChild,o=r.firstChild,O,p,T,k,g;e:for(;c;){for(k=c.nextSibling,O=d(c);!v&&o;){if(T=o.nextSibling,c.isSameNode&&c.isSameNode(o)){c=k,o=T;continue e}p=d(o);var q=o.nodeType,A=void 0;if(q===c.nodeType&&(q===x?(O?O!==p&&((g=m[O])?T===g?A=!1:(r.insertBefore(g,o),p?N(p):U(o,r,!0),o=g,p=d(o)):A=!1):p&&(A=!1),A=A!==!1&&_(o,c),A&&D(o,c)):(q===J||q==Q)&&(A=!0,o.nodeValue!==c.nodeValue&&(o.nodeValue=c.nodeValue))),A){c=k,o=T;continue e}p?N(p):U(o,r,!0),o=T}if(O&&(g=m[O])&&_(g,c))v||E(r,g),D(g,c);else{var G=f(c);G!==!1&&(G&&(c=G),c.actualize&&(c=c.actualize(r.ownerDocument||u)),E(r,c),B(c))}c=k,o=T}ie(r,o,p);var W=j[r.nodeName];W&&W(r,s)}var h=e,I=h.nodeType,X=n.nodeType;if(!H){if(I===x)X===x?_(e,n)||(L(e),h=pe(e,Se(n.nodeName,n.namespaceURI))):h=n;else if(I===J||I===Q){if(X===I)return h.nodeValue!==n.nodeValue&&(h.nodeValue=n.nodeValue),h;h=n}}if(h===n)L(e);else{if(n.isSameNode&&n.isSameNode(h))return;if(D(h,n,H),M)for(var R=0,ae=M.length;R<ae;R++){var F=m[M[R]];F&&U(F,F.parentNode,!1)}}return!H&&h!==e&&e.parentNode&&(h.actualize&&(h=h.actualize(e.ownerDocument||u)),e.parentNode.replaceChild(h,e)),h}}var Ae=ge(ce);window.addEventListener("DOMContentLoaded",function(){new we().init()});class we{constructor(){C(this,"sectionOverlay");C(this,"sectionLabel");C(this,"activeSectionId",null);C(this,"sectionsOrder",[])}init(){var t,e,n,a,l;this.sectionOverlay=document.querySelector("#section-overlay"),this.sectionLabel=document.querySelector("#label"),window.addEventListener("message",({data:d})=>{this.handleMessage(d)}),document.querySelectorAll("[data-section-type]").forEach(d=>{d.addEventListener("mouseover",this.onSectionHover.bind(this,d)),d.addEventListener("mouseleave",f=>{f.toElement&&f.toElement.closest("#section-overlay")||this.onSectionBlur.call(this,d)})}),(t=this.sectionOverlay.querySelector("#move-up"))==null||t.addEventListener("click",this.moveActiveSectionUp.bind(this)),(e=this.sectionOverlay.querySelector("#move-down"))==null||e.addEventListener("click",this.moveActiveSectionDown.bind(this)),(n=this.sectionOverlay.querySelector("#edit"))==null||n.addEventListener("click",this.editActiveSection.bind(this)),(a=this.sectionOverlay.querySelector("#disable"))==null||a.addEventListener("click",this.disableActiveSection.bind(this)),(l=this.sectionOverlay.querySelector("#remove"))==null||l.addEventListener("click",this.removeActiveSection.bind(this)),this.postMessage("initialize",{themeData:window.themeData,templates:window.templates,settingsSchema:window.settingsSchema}),this.sectionsOrder=window.themeData.sectionsOrder,this.extractUsedColors()}highlightSection(t){this.activeSectionId=t.dataset.sectionId,this.sectionOverlay.style.display="block",this.sectionOverlay.style.width=t.offsetWidth+"px",this.sectionOverlay.style.height=t.offsetHeight+"px",this.sectionOverlay.style.left=t.offsetLeft+"px",this.sectionOverlay.style.top=t.offsetTop+"px",t.dataset.sectionType,this.sectionLabel.textContent=t.dataset.sectionName,this.sectionOverlay.querySelector("#move-up").style.display="none",this.sectionOverlay.querySelector("#move-down").style.display="none";const e=this.sectionsOrder.indexOf(this.activeSectionId);e>0&&(this.sectionOverlay.querySelector("#move-up").style.display="inline"),e<this.sectionsOrder.length-1&&(this.sectionOverlay.querySelector("#move-down").style.display="inline")}clearActiveSection(){this.activeSectionId=null,this.sectionOverlay.style.display="none"}onSectionHover(t){this.activeSectionId!==t.dataset.sectionId&&this.highlightSection(t)}onSectionBlur(t){this.activeSectionId===t.dataset.sectionId&&this.clearActiveSection()}moveActiveSectionUp(){this.postMessage("moveSectionUp",this.activeSectionId)}moveActiveSectionDown(){this.postMessage("moveSectionDown",this.activeSectionId)}editActiveSection(){this.postMessage("editSection",this.activeSectionId)}disableActiveSection(){this.postMessage("toggleSection",this.activeSectionId)}removeActiveSection(){this.postMessage("removeSection",this.activeSectionId)}refreshPreviewer(t){const e=new DOMParser().parseFromString(t,"text/html");Ae(document.querySelector("html"),e.querySelector("html"),{onBeforeElUpdated(n,a){return n.hasAttribute("x-data")&&window.Alpine?(window.Alpine.morph(n,a),!1):n.hasAttribute("wire:id")&&window.Livewire?(a.setAttribute("wire:id",n.getAttribute("wire:id")),a.removeAttribute("wire:snapshot"),window.Livewire.trigger("effect",{component:n.__livewire,effects:{html:a.outerHTML},cleanup:l=>n.__livewire.addCleanup(l)}),!1):!0}})}postMessage(t,e){window.parent.postMessage({type:t,data:e},window.origin)}handleMessage({type:t,data:e}){switch(t){case"highlightSection":const n=document.querySelector(`[data-section-id="${e}"]`);n&&(this.highlightSection(n),n.scrollIntoView({behavior:"smooth"}));break;case"clearActiveSection":this.clearActiveSection();break;case"sectionsOrder":this.sectionsOrder=e;break;case"refresh":this.refreshPreviewer(e);break}}extractUsedColors(t=6){const e=new Map;document.querySelectorAll("*").forEach(l=>{const d=getComputedStyle(l),f=d.backgroundColor,y=d.color,b=S=>{S!=="transparent"&&S!=="rgba(0, 0, 0, 0)"&&S!==""&&e.set(S,(e.get(S)||0)+1)};b(f),b(y)});const a=Array.from(e.entries()).sort((l,d)=>d[1]-l[1]).map(l=>l[0]).slice(0,t);this.postMessage("usedColors",a)}}
